{% extends "base.html" %}
{% load static i18n %}

{% block content %}
<script src="https://d3js.org/d3.v5.min.js"></script>
<link href="{% static 'css/graph.css' %}" rel="stylesheet">
<script src="{% static 'js/graph.js' %}"></script>
<script src="{% static 'js/context-menu.js' %}"></script>
    <div class="container-fluid">
      <div class="tab-content card" style="text-align:center;">
        <div class="tab-pane active text-style card-body">
          <div id='graph'></div>
          <script>
            d3.json("{% url 'graph' %}?q={{project.tsx_id}}").then( function(json){
              drawGraph(json.data, json.max_parallel, json.max_depth, "{{signature.tsx_id}}");
            });
          </script>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="col-md-3 ">
          <div class="list-group ">
              <a href="#tab1" data-toggle="tab" class="list-group-item list-group-item-action">Project</a>
              <a href="#tab2" data-toggle="tab" class="list-group-item list-group-item-action">Study</a>
              <a href="#tab3" data-toggle="tab" class="list-group-item list-group-item-action">Assay</a>
              <a href="#tab4" data-toggle="tab" class="list-group-item list-group-item-action active">Signature</a>
            </div>
        </div>
        <div class="col-md-9">
            <div class="tab-content card">
              <div class="tab-pane text-style card-body" id="tab1">
                <h2><a href="{% url 'projects:detail' project.tsx_id %}">{{ project.tsx_id }}</a> - {{ project.name }}</h2>
                <p>{{ project.description }}</p>
              </div>
              <div class="tab-pane text-style card-body" id="tab2">
                <h2><a href="{% url 'studies:detail' study.tsx_id %}">{{ study.tsx_id }}</a> - {{ study.name }}</h2>
                <small> {{ study.study_type | lower | capfirst}}</small>
                <p>{{ study.experimental_design }}</p>
              </div>
              <div class="tab-pane text-style card-body" id="tab3">
                <h2><a href="{% url 'assays:detail' assay.tsx_id %}">{{ assay.tsx_id }}</a> - {{ assay.name }}</h2>
                <hr>
              </div>
              <div class="tab-pane active text-style card-body" id="tab4">
                  <h2>{{ signature.tsx_id }} - {{ signature.name }}</h2>
                  <hr>
              </div>
            </div>
        </div>
      </div>
    </div>

{% endblock %}
