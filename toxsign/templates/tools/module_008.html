{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}



{% block content %}
  <div class="container-fluid">
    <h1>Generic Design & Contrast Matrix</h1>
    <hr>
    <div class="row">
        <div class="col-md-12">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    <label for="job_name">Job name</label>
                    <input id="job_name" type="text" class="form-control" name="job_name" value="{{ job_name }}">
                </div>
                <div class="form-group">
                    <label for="matrix_info">Matrix info</label>
                    <input id="matrix_info" type="file" class="form-control-file" name="matrix_info" value="{{ matrix_info }}">
                </div>
                <button type="submit" class="btn btn-primary mb-2">Upload</button>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            {% if table_content %}
                <h4>Sample description</h4>
                {{ table_content | safe}}
                <hr>
            {% endif %}
        </div>
    </div>
    {% if condNames %}
        <div class="row">
            <div class="col-md-6">
                <label for="cond1">First condition</label>
                <select class="form-control" id="cond1" multiple>
                    {% for cond in condNames %}
                        <option value="{{cond}}">{{cond}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <label for="cond2">Second condition</label>
                <select class="form-control" id="cond2" multiple>
                    {% for cond in condNames %}
                        <option value="{{cond}}">{{cond}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="row" style="margin-top:10px;">
            <div class="col-md-4">
                <button type="button" onclick="AddConditions()" class="btn btn-primary mb-2"> Add </button>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-8">
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="2" disabled></textarea>
            </div>
        </div>
        <div class="row" style="margin-top:10px;">
            <div class="col-md-4">
                <button type="button" onclick="RemoveLast()" class="btn btn-warning mb-2"> Remove last </button>
            </div>
            <div class="col-md-4">
                <button type="button" onclick="Reset()" class="btn btn-danger mb-2"> Reset </button>
            </div>
        </div>
        <hr>
        <div class="row" style="margin-top:10px;" >
            <div class="col-md-4" style="display:none;" id="run_job">
                <button type="button" onclick="Run('{{ matrix_info| safe}}', '{{ tool_id| safe }}', '{{ job_name| safe }}')" class="btn btn-success mb-2"> Run </button>
            </div>
        </div>
    {% endif %}
  </div>
  <script>
    var url_job = '{% url "tools:ajax_module_008" %}'
    var url_redirect = '{% url "jobs:running_jobs" %}'
</script>
  <script src="{% static 'js/tools/module_008.js' %}"></script>
  
    
{% endblock %}